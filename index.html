<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fly Clicker Fixed</title>
    <script src="https://telegram.org"></script>
    <style>
        body { 
            margin: 0; padding: 0; background: #27ae60; 
            overflow: hidden; font-family: sans-serif; 
            width: 100vw; height: 100vh;
        }
        #ui { 
            position: absolute; top: 20px; width: 100%; 
            text-align: center; color: white; font-size: 24px; 
            z-index: 100; pointer-events: none;
        }
        .fly { 
            position: absolute; 
            width: 80px; height: 80px; 
            background: #333; /* –¢—ë–º–Ω–æ–µ —Ç–µ–ª—å—Ü–µ, —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ —É–≤–∏–¥–µ—Ç—å! */
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center; 
            font-size: 40px; cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            touch-action: none;
            z-index: 50;
        }
    </style>
</head>
<body>
    <div id="ui">–°—á–µ—Ç: <span id="score">0</span></div>
    <div id="game-canvas" style="width: 100%; height: 100%; position: relative;"></div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.setText("–°–û–•–†–ê–ù–ò–¢–¨ –ò –í–´–ô–¢–ò").show();

        let score = 0;
        const scoreDisplay = document.getElementById('score');
        const canvas = document.getElementById('game-canvas');

        function spawnFly() {
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –º—É—Ö—É, –µ—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
            canvas.innerHTML = ''; 

            const fly = document.createElement('div');
            fly.className = 'fly';
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º textContent ‚Äî —ç—Ç–æ –Ω–∞–¥—ë–∂–Ω–µ–µ –≤—Å–µ–≥–æ
            fly.textContent = "ü™∞"; 

            // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
            const maxX = window.innerWidth - 90;
            const maxY = window.innerHeight - 150;
            const x = Math.floor(Math.random() * maxX) + 10;
            const y = Math.floor(Math.random() * maxY) + 80;

            fly.style.left = x + 'px';
            fly.style.top = y + 'px';

            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–¥–æ–≤—Å–∫–∏–π –º–µ—Ç–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞ –∏ —Ç–∞–ø–∞
            const hit = function(e) {
                e.preventDefault();
                score++;
                scoreDisplay.textContent = score;
                spawnFly();
            };

            fly.addEventListener('mousedown', hit);
            fly.addEventListener('touchstart', hit);

            canvas.appendChild(fly);
        }

        tg.onEvent('mainButtonClicked', function() {
            tg.sendData(score.toString());
        });

        // –ó–∞–ø—É—Å–∫–∞–µ–º —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –ø–∞—É–∑—É, —á—Ç–æ–±—ã —ç–∫—Ä–∞–Ω —É—Å–ø–µ–ª –ø—Ä–æ–≥—Ä—É–∑–∏—Ç—å—Å—è
        setTimeout(spawnFly, 500);
    </script>
</body>
</html>
