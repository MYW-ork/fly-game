<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org"></script>
    <style>
        body { margin: 0; background: #27ae60; overflow: hidden; height: 100vh; width: 100vw; font-family: sans-serif; }
        #Scene { width: 100%; height: 100%; position: relative; }
        #ui { position: absolute; top: 10px; width: 100%; text-align: center; color: white; font-size: 24px; z-index: 10; pointer-events: none; }
        .fly-obj {
            position: absolute; width: 80px; height: 80px;
            display: flex; align-items: center; justify-content: center;
            font-size: 50px; cursor: pointer;
            transition: all 0.8s linear; /* –ü–ª–∞–≤–Ω—ã–π –ø–æ–ª–µ—Ç! */
            z-index: 5; touch-action: none;
        }
    </style>
</head>
<body>
    <div id="ui">–ú—É—Ö: <span id="score">0</span></div>
    <div id="Scene"></div> <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –≤—Å—è –º–∞–≥–∏—è -->

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.setText("–°–û–•–†–ê–ù–ò–¢–¨ –ò –í–´–ô–¢–ò").show();

        const scene = document.getElementById('Scene');
        const scoreVal = document.getElementById('score');
        let score = 0;

        // –°–æ–∑–¥–∞–µ–º –º—É—Ö—É —á–µ—Ä–µ–∑ JS, –∫–∞–∫ —Ç—ã –ª—é–±–∏—à—å
        const fly = document.createElement('div');
        fly.className = 'fly-obj';
        fly.textContent = "ü™∞";
        scene.appendChild(fly);

        function moveFly() {
            const x = Math.floor(Math.random() * (window.innerWidth - 100));
            const y = Math.floor(Math.random() * (window.innerHeight - 150)) + 50;
            fly.style.left = x + 'px';
            fly.style.top = y + 'px';
        }

        // –ê–≤—Ç–æ-–ø–æ–ª–µ—Ç –∫–∞–∂–¥—ã–µ 800–º—Å
        let flightTimer = setInterval(moveFly, 800);

        function handleHit(e) {
            if (e) e.preventDefault();
            
            // 1. –û–≥–ª—É—à–∞–µ–º –º—É—Ö—É
            fly.textContent = "üòµ‚Äçüí´"; 
            score++;
            scoreVal.textContent = score;
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–ª–µ—Ç –Ω–∞ —Å–µ–∫—É–Ω–¥—É
            clearInterval(flightTimer);
            
            // 2. –ß–µ—Ä–µ–∑ 300–º—Å –æ–Ω–∞ –∏—Å—á–µ–∑–∞–µ—Ç –∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–º –º–µ—Å—Ç–µ
            setTimeout(() => {
                fly.textContent = "ü™∞";
                moveFly();
                flightTimer = setInterval(moveFly, 800);
            }, 300);
        }

        fly.addEventListener('touchstart', handleHit);
        fly.addEventListener('mousedown', handleHit);

        tg.onEvent('mainButtonClicked', () => {
            tg.sendData(score.toString());
        });

        // –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
        moveFly();
    </script>
</body>
</html>
