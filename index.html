<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org"></script>
    <script>
        var tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.setText("–°–û–•–†–ê–ù–ò–¢–¨ –í –ë–û–¢–ï").show();

        // –ñ—ë—Å—Ç–∫–∏–µ –¥–µ—Ñ–æ–ª—Ç—ã
        var score = 100;
        var n1 = 0, n2 = 0, n3 = 0;

        // –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –ø–∞—Ä—Å–µ—Ä —Å—Å—ã–ª–∫–∏
        var params = new URLSearchParams(window.location.search);
        var s = params.get('score');
        if (s) { score = parseInt(s); }

        function play() {
            if (score <= 0) { alert("–û—á–∫–∏ –≤—Å—ë!"); return; }
            n1 = Math.floor(Math.random() * 10);
            n2 = Math.floor(Math.random() * 10);
            n3 = Math.floor(Math.random() * 10);

            if (n1 == n2 && n1 == n3) {
                if (n1 == 7) score += 777;
                else if (n1 == 0) score -= 500;
                else score += 100;
                alert("–ë–ò–ù–ì–û!");
            } else {
                score -= 1;
            }
            render();
        }

        function render() {
            document.getElementById('sc').textContent = score;
            document.getElementById('slots').textContent = n1 + " | " + n2 + " | " + n3;
        }

        tg.onEvent('mainButtonClicked', function() {
            tg.sendData(score.toString());
        });
    </script>
</head>
<body onload="render()" style="text-align:center; background:#eee; font-family:sans-serif;">
    <h2>üé∞ –†–æ–¥–∂–µ—Ä üé∞</h2>
    <h1 id="sc">...</h1>
    <div id="slots" style="font-size:50px; background:white; margin:20px; padding:20px; border:2px solid #000;">0 | 0 | 0</div>
    <button onclick="play()" style="width:80%; height:60px; font-size:20px;">–ö–†–£–¢–ò–¢–¨!</button>
</body>
</html>
