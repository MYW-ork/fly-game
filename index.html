<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org"></script>
    <style>
        body { margin: 0; background: #27ae60; overflow: hidden; height: 100vh; width: 100vw; }
        #container { width: 100%; height: 100%; position: relative; }
        /* –¢–≤–æ–π –∫–ª–∞—Å—Å –¥–ª—è –º—É—Ö–∏ */
        .fly-unit {
            position: absolute;
            width: 90px; height: 90px;
            display: flex; align-items: center; justify-content: center;
            font-size: 60px; cursor: pointer; z-index: 999;
            transition: all 0.7s; /* –ß—Ç–æ–±—ã –ø–ª–∞–≤–Ω–æ –ª–µ—Ç–∞–ª–∞ */
        }
        #score-board {
            position: absolute; top: 10px; width: 100%; text-align: center;
            color: white; font-size: 30px; font-family: sans-serif; z-index: 100;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="score-board">–ú—É—Ö: <span id="val">0</span></div>
    </div>

    <script>
        var tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.setText("–°–û–•–†–ê–ù–ò–¢–¨ –†–ï–ö–û–†–î").show();

        var container = document.getElementById("container");
        var scoreVal = document.getElementById("val");
        var score = 0;

        // –¢–í–û–Ø –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è add_Object (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–¥ –º–∏–Ω–∏–º–∞–ª–∏–∑–º)
        function add_Object(object, id, content, posX, posY, current) {
            var newObj = document.createElement(object);
            newObj.id = id;
            newObj.className = "fly-unit";
            
            // –¢–≤–æ–π –º–µ—Ç–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤—Ä—É—á–Ω—É—é
            var txt = document.createTextNode(content);
            newObj.appendChild(txt);
            
            newObj.style.left = posX + "px";
            newObj.style.top = posY + "px";
            
            current.appendChild(newObj);
            return newObj;
        }

        // –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
        function moveFly(obj) {
            var x = Math.floor(Math.random() * (window.innerWidth - 100));
            var y = Math.floor(Math.random() * (window.innerHeight - 200)) + 80;
            obj.style.left = x + "px";
            obj.style.top = y + "px";
        }

        // –°—Ç–∞—Ä—Ç –∏–≥—Ä—ã
        function init() {
            // –°–æ–∑–¥–∞–µ–º –º—É—Ö—É —Ç–≤–æ–∏–º –º–µ—Ç–æ–¥–æ–º
            var fly = add_Object('div', 'the_fly', 'ü™∞', 100, 100, container);

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞/—Ç–∞–ø–∞
            var hit = function(e) {
                if(e) e.preventDefault();
                score++;
                scoreVal.innerHTML = score;
                
                fly.innerHTML = ""; // –û—á–∏—Å—Ç–∫–∞
                fly.appendChild(document.createTextNode("üòµ‚Äçüí´")); // –û–≥–ª—É—à–µ–Ω–∏–µ
                
                setTimeout(function() {
                    fly.innerHTML = "";
                    fly.appendChild(document.createTextNode("ü™∞"));
                    moveFly(fly);
                }, 300);
            };

            fly.onclick = hit;
            fly.ontouchstart = hit;

            // –õ–µ—Ç–∞–µ—Ç —Å–∞–º–∞ —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É
            setInterval(function() {
                moveFly(fly);
            }, 1100);
        }

        tg.onEvent('mainButtonClicked', function() {
            tg.sendData(score.toString());
        });

        // –ó–∞–ø—É—Å–∫
        window.onload = init;
    </script>
</body>
</html>
