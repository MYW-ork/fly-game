<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fly Recovery</title>
    <script src="https://telegram.org"></script>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #27ae60; overflow: hidden; }
        #ui { position: absolute; top: 10px; width: 100%; text-align: center; color: white; font-family: sans-serif; font-size: 24px; z-index: 100; }
        #Scene { width: 100vw; height: 100vh; position: relative; background: #27ae60; }
        .fly-unit {
            position: absolute; width: 80px; height: 80px;
            background: rgba(0,0,0,0.1); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 50px; cursor: pointer; z-index: 50;
            transition: top 0.7s, left 0.7s; /* –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ */
        }
    </style>
</head>
<body>
    <div id="ui">–ú—É—Ö: <span id="score">0</span></div>
    <div id="Scene"></div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.setText("–°–û–•–†–ê–ù–ò–¢–¨ –†–ï–ö–û–†–î").show();

        const scene = document.getElementById('Scene');
        const scoreDisplay = document.getElementById('score');
        let score = 0;

        // –°–æ–∑–¥–∞–µ–º –º—É—Ö—É
        const fly = document.createElement('div');
        fly.className = 'fly-unit';
        fly.textContent = "ü™∞";
        scene.appendChild(fly);

        function move() {
            const x = Math.floor(Math.random() * (window.innerWidth - 90));
            const y = Math.floor(Math.random() * (window.innerHeight - 150)) + 60;
            fly.style.left = x + "px";
            fly.style.top = y + "px";
        }

        // –ö–ª–∏–∫
        const kill = (e) => {
            if(e) e.preventDefault();
            score++;
            scoreDisplay.textContent = score;
            fly.textContent = "üòµ‚Äçüí´";
            setTimeout(() => { fly.textContent = "ü™∞"; }, 300);
            move();
        };

        fly.addEventListener('mousedown', kill);
        fly.addEventListener('touchstart', kill);

        // –õ–µ—Ç–∞–µ—Ç —Å–∞–º–∞ —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É
        setInterval(move, 1000);

        tg.onEvent('mainButtonClicked', () => {
            tg.sendData(score.toString());
            tg.close();
        });

        move();
    </script>
</body>
</html>
