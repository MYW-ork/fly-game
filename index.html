<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org"></script>
    <script>
        var tg = window.Telegram.WebApp;
        tg.expand();

        var score = 0;

        function initGame() {
            // –ò—â–µ–º –≤ URL –∏–º–µ–Ω–Ω–æ "s=" (–Ω–∞—à —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –æ—á–∫–æ–≤)
            var urlStr = window.location.search;
            var match = urlStr.match(/s=(\d+)/); 
            
            if (match && match[1]) {
                // –ï—Å–ª–∏ –Ω–∞—à–ª–∏ s=—á–∏—Å–ª–æ, –±–µ—Ä–µ–º –µ–≥–æ
                score = parseInt(match[1]);
            } else {
                // –ï—Å–ª–∏ –Ω–µ—Ç –Ω–∞—à–µ–≥–æ s=, –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û —Å—Ç–∞–≤–∏–º 8
                score = 8;
                syncUrl();
            }
            render();
        }

        function syncUrl() {
            // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ URL –∏–º–µ–Ω–Ω–æ s=—á–∏—Å–ª–æ, —á—Ç–æ–±—ã –Ω–µ –ø—É—Ç–∞—Ç—å —Å ID –¢–µ–ª–µ–≥—Ä–∞–º–∞
            var newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?s=' + score;
            window.history.replaceState({path:newUrl}, '', newUrl);
        }

        function play() {
            score = score - 1;
            syncUrl();
            render();
        }

        function render() {
            document.getElementById('sc').textContent = "Score: " + score;
            tg.MainButton.setText("–°–û–•–†–ê–ù–ò–¢–¨ " + score).show();
        }

        tg.onEvent('mainButtonClicked', function() {
            tg.sendData(score.toString());
        });
    </script>
</head>
<body onload="initGame()" style="text-align:center; background:#1a1a1a; color:white; font-family:sans-serif; padding-top:50px;">
    
    <div style="background:#2c3e50; padding:30px; border-radius:30px; border: 4px solid #34cceb;">
        <h1 id="sc" style="font-size:50px; margin:0; color:#34cceb;">Score: ?</h1>
    </div>

    <div style="margin-top:40px;">
        <button onclick="play()" style="width:180px; height:180px; border-radius:50%; border:none; background:#34cceb; color:white; font-size:35px; font-weight:bold; box-shadow: 0 8px #2980b9; cursor:pointer;">
            –¢–´–ö!
        </button>
    </div>

    <p style="margin-top:40px; opacity:0.6; font-size:12px;">–§–∏–ª—å—Ç—Ä ID –¢–µ–ª–µ–≥—Ä–∞–º–∞ –∞–∫—Ç–∏–≤–µ–Ω üöÄ</p>

</body>
</html>
