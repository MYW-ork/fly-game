<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fly Clicker</title>
    <!-- –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–∫—Ä–∏–ø—Ç Telegram -->
    <script src="https://telegram.org"></script>
    <style>
        body { 
            margin: 0; 
            padding: 0;
            background: #64C864; 
            overflow: hidden; 
            font-family: 'Arial', sans-serif;
            user-select: none;
            -webkit-user-select: none;
            touch-action: none; /* –û—Ç–∫–ª—é—á–∞–µ–º –ª–∏—à–Ω–∏–µ –∂–µ—Å—Ç—ã –±—Ä–∞—É–∑–µ—Ä–∞ */
        }
        #ui {
            position: absolute;
            top: 20px;
            width: 100%;
            text-align: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            pointer-events: none;
            z-index: 100;
        }
        .fly {
            position: absolute;
            width: 60px;
            height: 60px;
            background-color: #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            z-index: 50; /* –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å –Ω–∞–¥ —Ñ–æ–Ω–æ–º */
            touch-action: manipulation;
        }
        .fly::before, .fly::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 20px;
            background: rgba(255,255,255,0.6);
            border-radius: 50%;
            top: 10px;
        }
        .fly::before { left: -15px; transform: rotate(-30deg); }
        .fly::after { right: -15px; transform: rotate(30deg); }
    </style>
</head>
<body>
    <div id="ui">–ú—É—Ö –ø—Ä–∏—Ö–ª–æ–ø–Ω—É—Ç–æ: <span id="score">0</span></div>
    <div id="game-canvas" style="width: 100vw; height: 100vh;"></div>

    <script>
        let tg = window.Telegram.WebApp;
        let score = 0;
        const scoreDisplay = document.getElementById('score');
        const canvas = document.getElementById('game-canvas');

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebApp
        tg.ready();
        tg.expand();
        tg.MainButton.setText("–ó–ê–í–ï–†–®–ò–¢–¨ –û–•–û–¢–£").show();

        function spawnFly() {
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –º—É—Ö—É, –µ—Å–ª–∏ –æ–Ω–∞ –≤–¥—Ä—É–≥ –æ—Å—Ç–∞–ª–∞—Å—å
            const oldFly = document.querySelector('.fly');
            if (oldFly) oldFly.remove();

            const fly = document.createElement('div');
            fly.className = 'fly';
            
            // –†–∞—Å—á–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å —É—á–µ—Ç–æ–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –≤—å—é–ø–æ—Ä—Ç–∞
            const width = window.innerWidth;
            const height = window.innerHeight;
            
            const x = Math.random() * (width - 80) + 10;
            const y = Math.random() * (height - 150) + 80;
            
            fly.style.left = x + 'px';
            fly.style.top = y + 'px';
            //fly.innerHTML = "ü™∞";
            fly.innerHTML = "0";

            // –î–ª—è –º–æ–±–∏–ª–æ–∫ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pointerdown (—Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ —á–µ–º click)
            fly.onpointerdown = function(e) {
                e.preventDefault();
                score++;
                scoreDisplay.innerText = score;
                this.remove();
                spawnFly(); 
            };

            canvas.appendChild(fly);
        }

        tg.onEvent('mainButtonClicked', function(){
            tg.sendData(score.toString()); 
        });

        // –ó–∞–ø—É—Å–∫ —Å –º–∏–∫—Ä–æ-–∑–∞–¥–µ—Ä–∂–∫–æ–π, —á—Ç–æ–±—ã Xiaomi —É—Å–ø–µ–ª –ø–æ—Å—á–∏—Ç–∞—Ç—å –≤—ã—Å–æ—Ç—É —ç–∫—Ä–∞–Ω–∞
        window.onload = () => {
            setTimeout(spawnFly, 200);
        };
    </script>
</body>
</html>
            justify-content: center;
            font-size: 30px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        /* –ö—Ä—ã–ª—ã—à–∫–∏ –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã */
        .fly::before, .fly::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 20px;
            background: rgba(255,255,255,0.6);
            border-radius: 50%;
            top: 10px;
        }
        .fly::before { left: -15px; transform: rotate(-30deg); }
        .fly::after { right: -15px; transform: rotate(30deg); }
    </style>
</head>
<body>
    <div id="ui">–ú—É—Ö –ø—Ä–∏—Ö–ª–æ–ø–Ω—É—Ç–æ: <span id="score">0</span></div>
    <div id="game-canvas" style="width: 100vw; height: 100vh;"></div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.setText("–ó–ê–í–ï–†–®–ò–¢–¨ –û–•–û–¢–£").show();

        let score = 0;
        const scoreDisplay = document.getElementById('score');
        const canvas = document.getElementById('game-canvas');

        function spawnFly() {
            const fly = document.createElement('div');
            fly.className = 'fly';
            
            // –°–ª—É—á–∞–π–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (—Å –æ—Ç—Å—Ç—É–ø–∞–º–∏ –æ—Ç –∫—Ä–∞–µ–≤)
            const x = Math.random() * (window.innerWidth - 80) + 10;
            const y = Math.random() * (window.innerHeight - 150) + 80;
            
            fly.style.left = x + 'px';
            fly.style.top = y + 'px';
            fly.innerHTML = "ü™∞"; // –ù–∞—Å—Ç–æ—è—â–∏–π —ç–º–æ–¥–∑–∏ –º—É—Ö–∏!

            fly.onclick = function() {
                score++;
                scoreDisplay.innerText = score;
                canvas.removeChild(fly);
                spawnFly(); // –°–ø–∞–≤–Ω–∏–º –Ω–æ–≤—É—é
            };

            canvas.appendChild(fly);
        }

        // –ö–æ–≥–¥–∞ –∂–º–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é –∫–Ω–æ–ø–∫—É –¢–µ–ª–µ–≥—Ä–∞–º–∞ - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å—á–µ—Ç –±–æ—Ç—É
        tg.onEvent('mainButtonClicked', function(){
            tg.sendData(score.toString()); 
        });

        // –ó–∞–ø—É—Å–∫ –ø–µ—Ä–≤–æ–π –º—É—Ö–∏
        spawnFly();
    </script>
</body>
</html>
